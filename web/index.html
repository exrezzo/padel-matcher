<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Padel Match Viewer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      :root { color-scheme: light dark; --bg:#0b0c10; --fg:#e5e7eb; --card:#111827; --muted:#9ca3af; }
      html, body { height:100%; margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial; background:#0b0c10; color:var(--fg); }
      .wrap { min-height:100%; display:grid; place-items:center; padding:24px; }
      .card { width:100%; max-width:720px; background: rgba(17,24,39,.9); border:1px solid rgba(255,255,255,.08); border-radius:16px; padding:24px; }
      h1 { margin:0 0 12px 0; font-size:24px; }
      p { margin:0 0 12px 0; color:var(--muted); }
      pre { margin:12px 0 0 0; padding:12px; background: rgba(255,255,255,.05); border-radius:12px; overflow:auto; }
    </style>
  </head>
  <body>
    <main class="wrap">
      <section class="card" role="region" aria-labelledby="title">
        <h1 id="title">Padel match</h1>
        <p id="desc">Loadingâ€¦</p>
        <pre id="out" aria-live="polite">{}</pre>
      </section>
    </main>

    <script>
      (async function () {
        const UUID = "fe72b860-36cf-4855-9bad-6fdef6a2edf9";
        const isLocal = location.hostname === "localhost" || location.hostname === "127.0.0.1";
        // Use your deployed functions URL by default; swap to localhost in dev
        const BASE = isLocal
          ? "http://127.0.0.1:54321"
          : "https://epbxkcopfodxdseteqlh.functions.supabase.co";
        const url = `${BASE}/functions/v1/get-match?id=${UUID}`;

        const desc = document.getElementById("desc");
        const out = document.getElementById("out");
        try {
          const res = await fetch(url, { headers: { "Content-Type": "application/json" } });
          const json = await res.json();
          if (!res.ok) {
            desc.textContent = `Error: ${json.error || res.statusText}`;
            out.textContent = JSON.stringify(json, null, 2);
            return;
          }
          desc.textContent = `Match ${json.match.id}`;
          out.textContent = JSON.stringify(json.match, null, 2);
        } catch (e) {
          desc.textContent = `Request failed`;
          out.textContent = String(e);
        }
      })();
    </script>
  </body>
</html>
